// Compiled by ClojureScript 0.0-2202
goog.provide('viennese.core');
goog.require('cljs.core');
goog.require('sablono.core');
goog.require('sablono.core');
goog.require('om.dom');
goog.require('om.dom');
goog.require('om.core');
goog.require('om.core');
goog.require('figwheel.client');
goog.require('figwheel.client');
cljs.core.enable_console_print_BANG_.call(null);
viennese.core.colors = new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"red","red",1014017027),"#F00",new cljs.core.Keyword(null,"yellow","yellow",4574631910),"#FFF700",new cljs.core.Keyword(null,"green","green",1112523381),"#0F0"], null);
viennese.core.square = (function square(x){return (x * x);
});
viennese.core.make_location = (function make_location(x,y){return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"top","top",1014019271),(30 + (y * 40)),new cljs.core.Keyword(null,"left","left",1017222009),(30 + (x * 40))], null);
});
viennese.core.next_color = (function next_color(color){return color.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"red","red",1014017027),new cljs.core.Keyword(null,"green","green",1112523381),new cljs.core.Keyword(null,"yellow","yellow",4574631910),new cljs.core.Keyword(null,"red","red",1014017027),new cljs.core.Keyword(null,"green","green",1112523381),new cljs.core.Keyword(null,"yellow","yellow",4574631910)], null));
});
viennese.core.change_light = (function change_light(p__14207){var vec__14209 = p__14207;var x = cljs.core.nth.call(null,vec__14209,0,null);var y = cljs.core.nth.call(null,vec__14209,1,null);var color = cljs.core.nth.call(null,vec__14209,2,null);return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [x,y,viennese.core.next_color.call(null,color)], null);
});
viennese.core.x = (function x(p__14210){var vec__14212 = p__14210;var x__$1 = cljs.core.nth.call(null,vec__14212,0,null);var y = cljs.core.nth.call(null,vec__14212,1,null);return x__$1;
});
viennese.core.y = (function y(p__14213){var vec__14215 = p__14213;var x = cljs.core.nth.call(null,vec__14215,0,null);var y__$1 = cljs.core.nth.call(null,vec__14215,1,null);return y__$1;
});
viennese.core.change_lights = (function change_lights(app){return om.core.transact_BANG_.call(null,app,new cljs.core.Keyword(null,"edges","edges",1110261192),(function (lights){return cljs.core.map.call(null,viennese.core.change_light,lights);
}));
});
viennese.core.edge = (function edge(from_node,to_node,color,nodes){var to = to_node.call(null,nodes);var from = from_node.call(null,nodes);var location = viennese.core.make_location.call(null,viennese.core.x.call(null,to),viennese.core.y.call(null,to));var top = new cljs.core.Keyword(null,"top","top",1014019271).cljs$core$IFn$_invoke$arity$1(location);var left = new cljs.core.Keyword(null,"left","left",1017222009).cljs$core$IFn$_invoke$arity$1(location);var length = (40 * Math.sqrt.call(null,(viennese.core.square.call(null,(viennese.core.x.call(null,from) - viennese.core.x.call(null,to))) + viennese.core.square.call(null,(viennese.core.y.call(null,from) - viennese.core.y.call(null,to))))));var angle = ((180 / 3.14) * Math.acos.call(null,((40 * (viennese.core.y.call(null,from) - viennese.core.y.call(null,to))) / length)));return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.behind","div.behind",2304053417),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"key","key",1014010321),cljs.core.gensym.call(null),new cljs.core.Keyword(null,"style","style",1123684643),new cljs.core.PersistentArrayMap(null, 8, [new cljs.core.Keyword(null,"position","position",1761709211),new cljs.core.Keyword(null,"absolute","absolute",2742026473),new cljs.core.Keyword(null,"width","width",1127031096),3,new cljs.core.Keyword(null,"top","top",1014019271),(top + 5),new cljs.core.Keyword(null,"left","left",1017222009),(left + 7),new cljs.core.Keyword(null,"height","height",4087841945),length,new cljs.core.Keyword(null,"background-color","background-color",1619226998),color.call(null,viennese.core.colors),new cljs.core.Keyword(null,"transform-origin","transform-origin",2366320665),"top left",new cljs.core.Keyword(null,"transform","transform",2066570974),[cljs.core.str("rotate("),cljs.core.str(angle),cljs.core.str("deg)")].join('')], null)], null)], null);
});
viennese.core.node = (function node(label,p__14216,app){var vec__14218 = p__14216;var x = cljs.core.nth.call(null,vec__14218,0,null);var y = cljs.core.nth.call(null,vec__14218,1,null);var location = viennese.core.make_location.call(null,x,y);var top = (new cljs.core.Keyword(null,"top","top",1014019271).cljs$core$IFn$_invoke$arity$1(location) - 5);var left = (new cljs.core.Keyword(null,"left","left",1017222009).cljs$core$IFn$_invoke$arity$1(location) - 5);return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1014003715),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"onClick","onClick",3956969051),((function (location,top,left,vec__14218,x,y){
return (function (){return viennese.core.change_lights.call(null,app);
});})(location,top,left,vec__14218,x,y))
,new cljs.core.Keyword(null,"style","style",1123684643),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"position","position",1761709211),new cljs.core.Keyword(null,"width","width",1127031096),new cljs.core.Keyword(null,"z-index","z-index",3303828785),new cljs.core.Keyword(null,"text-align","text-align",1760136663),new cljs.core.Keyword(null,"border-width","border-width",1324275799),new cljs.core.Keyword(null,"border-color","border-color",1305991668),new cljs.core.Keyword(null,"top","top",1014019271),new cljs.core.Keyword(null,"left","left",1017222009),new cljs.core.Keyword(null,"border-style","border-style",1320929346),new cljs.core.Keyword(null,"background-color","background-color",1619226998),new cljs.core.Keyword(null,"border-radius","border-radius",1894943941),new cljs.core.Keyword(null,"line-height","line-height",4093191314),new cljs.core.Keyword(null,"height","height",4087841945)],[new cljs.core.Keyword(null,"absolute","absolute",2742026473),20,"100",new cljs.core.Keyword(null,"center","center",3944857543),1,"#000",top,left,new cljs.core.Keyword(null,"solid","solid",1123523101),"#FFF","50%",20,20])], null),label], null);
});
viennese.core.testing = (function testing(app,owner){if(typeof viennese.core.t14230 !== 'undefined')
{} else
{
/**
* @constructor
*/
viennese.core.t14230 = (function (owner,app,testing,meta14231){
this.owner = owner;
this.app = app;
this.testing = testing;
this.meta14231 = meta14231;
this.cljs$lang$protocol_mask$partition1$ = 0;
this.cljs$lang$protocol_mask$partition0$ = 393216;
})
viennese.core.t14230.cljs$lang$type = true;
viennese.core.t14230.cljs$lang$ctorStr = "viennese.core/t14230";
viennese.core.t14230.cljs$lang$ctorPrWriter = (function (this__8441__auto__,writer__8442__auto__,opt__8443__auto__){return cljs.core._write.call(null,writer__8442__auto__,"viennese.core/t14230");
});
viennese.core.t14230.prototype.om$core$IRender$ = true;
viennese.core.t14230.prototype.om$core$IRender$render$arity$1 = (function (this$){var self__ = this;
var this$__$1 = this;var attrs14233 = cljs.core.map.call(null,((function (this$__$1){
return (function (p__14234){var vec__14235 = p__14234;var label = cljs.core.nth.call(null,vec__14235,0,null);var vec__14236 = cljs.core.nth.call(null,vec__14235,1,null);var x = cljs.core.nth.call(null,vec__14236,0,null);var y = cljs.core.nth.call(null,vec__14236,1,null);return viennese.core.node.call(null,cljs.core.name.call(null,label),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x,y], null),self__.app);
});})(this$__$1))
,new cljs.core.Keyword(null,"nodes","nodes",1118897699).cljs$core$IFn$_invoke$arity$1(self__.app));if(cljs.core.map_QMARK_.call(null,attrs14233))
{return React.DOM.div(sablono.render.render_attrs.call(null,sablono.util.merge_with_class.call(null,cljs.core.PersistentArrayMap.EMPTY,attrs14233)),sablono.render.render_html.call(null,cljs.core.map.call(null,((function (attrs14233,this$__$1){
return (function (p__14237){var vec__14238 = p__14237;var a = cljs.core.nth.call(null,vec__14238,0,null);var b = cljs.core.nth.call(null,vec__14238,1,null);var color = cljs.core.nth.call(null,vec__14238,2,null);return viennese.core.edge.call(null,a,b,color,new cljs.core.Keyword(null,"nodes","nodes",1118897699).cljs$core$IFn$_invoke$arity$1(self__.app));
});})(attrs14233,this$__$1))
,new cljs.core.Keyword(null,"edges","edges",1110261192).cljs$core$IFn$_invoke$arity$1(self__.app))));
} else
{return React.DOM.div({},sablono.render.render_html.call(null,attrs14233),sablono.render.render_html.call(null,cljs.core.map.call(null,((function (attrs14233,this$__$1){
return (function (p__14239){var vec__14240 = p__14239;var a = cljs.core.nth.call(null,vec__14240,0,null);var b = cljs.core.nth.call(null,vec__14240,1,null);var color = cljs.core.nth.call(null,vec__14240,2,null);return viennese.core.edge.call(null,a,b,color,new cljs.core.Keyword(null,"nodes","nodes",1118897699).cljs$core$IFn$_invoke$arity$1(self__.app));
});})(attrs14233,this$__$1))
,new cljs.core.Keyword(null,"edges","edges",1110261192).cljs$core$IFn$_invoke$arity$1(self__.app))));
}
});
viennese.core.t14230.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_14232){var self__ = this;
var _14232__$1 = this;return self__.meta14231;
});
viennese.core.t14230.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_14232,meta14231__$1){var self__ = this;
var _14232__$1 = this;return (new viennese.core.t14230(self__.owner,self__.app,self__.testing,meta14231__$1));
});
viennese.core.__GT_t14230 = (function __GT_t14230(owner__$1,app__$1,testing__$1,meta14231){return (new viennese.core.t14230(owner__$1,app__$1,testing__$1,meta14231));
});
}
return (new viennese.core.t14230(owner,app,testing,null));
});
if(cljs.core.truth_(viennese.core.hasOwnProperty("app_state")))
{} else
{viennese.core.app_state = cljs.core.atom.call(null,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"nodes","nodes",1118897699),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"a","a",1013904339),new cljs.core.Keyword(null,"c","c",1013904341),new cljs.core.Keyword(null,"b","b",1013904340),new cljs.core.Keyword(null,"f","f",1013904344),new cljs.core.Keyword(null,"g","g",1013904345),new cljs.core.Keyword(null,"d","d",1013904342),new cljs.core.Keyword(null,"e","e",1013904343),new cljs.core.Keyword(null,"l","l",1013904350),new cljs.core.Keyword(null,"k","k",1013904349),new cljs.core.Keyword(null,"j","j",1013904348),new cljs.core.Keyword(null,"m","m",1013904351),new cljs.core.Keyword(null,"i","i",1013904347),new cljs.core.Keyword(null,"h","h",1013904346)],[new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [0,4], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [2,4], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [2,2], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [4,6], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [4,4], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [2,6], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [4,8], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [6,6], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [6,4], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [6,2], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [8,4], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [4,0], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [4,2], null)]),new cljs.core.Keyword(null,"edges","edges",1110261192),new cljs.core.PersistentVector(null, 24, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"a","a",1013904339),new cljs.core.Keyword(null,"b","b",1013904340),new cljs.core.Keyword(null,"yellow","yellow",4574631910)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"a","a",1013904339),new cljs.core.Keyword(null,"c","c",1013904341),new cljs.core.Keyword(null,"green","green",1112523381)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"a","a",1013904339),new cljs.core.Keyword(null,"d","d",1013904342),new cljs.core.Keyword(null,"red","red",1014017027)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"b","b",1013904340),new cljs.core.Keyword(null,"i","i",1013904347),new cljs.core.Keyword(null,"green","green",1112523381)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"b","b",1013904340),new cljs.core.Keyword(null,"h","h",1013904346),new cljs.core.Keyword(null,"green","green",1112523381)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"b","b",1013904340),new cljs.core.Keyword(null,"c","c",1013904341),new cljs.core.Keyword(null,"green","green",1112523381)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"c","c",1013904341),new cljs.core.Keyword(null,"d","d",1013904342),new cljs.core.Keyword(null,"yellow","yellow",4574631910)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"d","d",1013904342),new cljs.core.Keyword(null,"f","f",1013904344),new cljs.core.Keyword(null,"green","green",1112523381)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"f","f",1013904344),new cljs.core.Keyword(null,"e","e",1013904343),new cljs.core.Keyword(null,"green","green",1112523381)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"d","d",1013904342),new cljs.core.Keyword(null,"e","e",1013904343),new cljs.core.Keyword(null,"red","red",1014017027)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"c","c",1013904341),new cljs.core.Keyword(null,"g","g",1013904345),new cljs.core.Keyword(null,"green","green",1112523381)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"i","i",1013904347),new cljs.core.Keyword(null,"h","h",1013904346),new cljs.core.Keyword(null,"green","green",1112523381)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h","h",1013904346),new cljs.core.Keyword(null,"g","g",1013904345),new cljs.core.Keyword(null,"green","green",1112523381)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"g","g",1013904345),new cljs.core.Keyword(null,"f","f",1013904344),new cljs.core.Keyword(null,"green","green",1112523381)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h","h",1013904346),new cljs.core.Keyword(null,"j","j",1013904348),new cljs.core.Keyword(null,"yellow","yellow",4574631910)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"i","i",1013904347),new cljs.core.Keyword(null,"j","j",1013904348),new cljs.core.Keyword(null,"yellow","yellow",4574631910)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"g","g",1013904345),new cljs.core.Keyword(null,"k","k",1013904349),new cljs.core.Keyword(null,"green","green",1112523381)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"f","f",1013904344),new cljs.core.Keyword(null,"l","l",1013904350),new cljs.core.Keyword(null,"yellow","yellow",4574631910)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"e","e",1013904343),new cljs.core.Keyword(null,"l","l",1013904350),new cljs.core.Keyword(null,"red","red",1014017027)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"j","j",1013904348),new cljs.core.Keyword(null,"k","k",1013904349),new cljs.core.Keyword(null,"yellow","yellow",4574631910)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"k","k",1013904349),new cljs.core.Keyword(null,"l","l",1013904350),new cljs.core.Keyword(null,"yellow","yellow",4574631910)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"l","l",1013904350),new cljs.core.Keyword(null,"m","m",1013904351),new cljs.core.Keyword(null,"red","red",1014017027)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"k","k",1013904349),new cljs.core.Keyword(null,"m","m",1013904351),new cljs.core.Keyword(null,"green","green",1112523381)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"j","j",1013904348),new cljs.core.Keyword(null,"m","m",1013904351),new cljs.core.Keyword(null,"red","red",1014017027)], null)], null)], null));
}
om.core.root.call(null,viennese.core.testing,viennese.core.app_state,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"target","target",4427965699),document.getElementById("app")], null));
figwheel.client.watch_and_reload.call(null,new cljs.core.Keyword(null,"jsload-callback","jsload-callback",3126035989),(function (){return null;
}));
